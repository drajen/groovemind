<!DOCTYPE html>
<html lang="en">
<head>
  {{> header }}
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    main {
      flex: 1;
    }

    .card {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
      border-radius: 8px;
    }

    .card-title {
      color: #914949;
    }

    .btn-outline-danger:hover,
    .btn-outline-info:hover,
    .btn-outline-success:hover,
    .btn-outline-secondary:hover {
      color: #fff !important;
    }
  </style>
</head>

<body>
  <main class="container mt-5">
    <h1 class="mb-4 text-center">{{title}}</h1>

    <div class="row mb-4">
      <div class="col-sm-6 col-md-3 mb-2">
        <a href="/new" class="btn btn-success btn-block">
          <i class="fa-solid fa-plus" style="color: #FFD43B;"></i> Add Course
        </a>
      </div>
      <div class="col-sm-6 col-md-3 mb-2">
        <a href="/organisers/add" class="btn btn-primary btn-block">
          <i class="fas fa-user-plus"></i> Add Organiser
        </a>
      </div>
      <div class="col-sm-6 col-md-3 mb-2">
        <a href="/organisers/delete" class="btn btn-danger btn-block">
          <i class="fas fa-user-minus"></i> Delete Organiser
        </a>
      </div>
      <div class="col-sm-6 col-md-3 mb-2">
        <a href="/logout" class="btn btn-secondary btn-block">
          <i class="fas fa-sign-out-alt"></i> Log Out
        </a>
      </div>
    </div>

    <hr class="my-4">

    <h2 class="mb-3 text-center">Manage All Upcoming Courses</h2>

    {{#entries}}
      <div class="card mb-4">
        <div class="card-body">
          <h4 class="card-title">{{name}}</h4>
          <p class="card-text">{{description}}</p>
          <p class="card-text"><strong>£{{price}}</strong></p>

          {{#classes}}
            <div class="d-flex justify-content-between align-items-center mb-2">
              <span><strong>{{date}} at {{time}}</strong> – {{classDescription}}</span>
              <div>
                <a href="/courses/{{_id}}/classes/{{index}}/edit" class="btn btn-sm btn-outline-info">
                  <i class="fas fa-edit"></i> Edit Class
                </a>
                <form method="POST" action="/courses/{{_id}}/classes/{{index}}/delete" style="display:inline;">
                  <button type="submit" class="btn btn-sm btn-outline-danger">
                    <i class="fas fa-trash-alt"></i> Delete Class
                  </button>
                </form>
              </div>
            </div>
          {{/classes}}

          <a href="/courses/{{_id}}/classes/new" class="btn btn-outline-success btn-sm mb-2">
            <i class="fas fa-plus"></i> Add Class
          </a>

          <div class="mt-3">
            <a href="/courses/{{_id}}/classlist/view" class="btn btn-outline-secondary btn-sm">
              <i class="fas fa-list"></i> View Class List
            </a>
            <a href="/courses/{{_id}}/edit" class="btn btn-outline-info btn-sm">
              <i class="fas fa-edit"></i> Edit Course
            </a>
            <form method="POST" action="/courses/{{_id}}?_method=DELETE" style="display:inline;">
              <button type="submit" class="btn btn-outline-danger btn-sm">
                <i class="fas fa-trash-alt"></i> Delete Course
              </button>
            </form>
          </div>
        </div>
      </div>
    {{/entries}}

    {{^entries}}
      <div class="alert alert-info text-center">No courses available.</div>
    {{/entries}}
  </main>

  {{> footer }}
</body>
</html>